---
title: "Wallet Provider Api Methods"
description: "Call each via `provider.request({ method: '<name>', params: [...] })` unless noted otherwise."
icon: "code"
---
# Wallet Provider API methods

Call each via `provider.request({ method: '<name>', params: [...] })` unless noted otherwise.

#### Common error codes

* **TIMEOUT**: popup not resolved before timeout
* **POPUP_ERROR**: could not open popup
* **...Cancelled**: user closed popup (e.g., `validationCancelled`, `addTwitterIdentityCancelled`)
* Method-specific errors (e.g., `nativeTransferError`, `sendTransactionError`), with optional `details`

## Connection

#### connect

* **Params**: none
* **Behavior**: opens a connection popup; user approves/denies.
* **Success data**: `{ address: string }`
* **Errors**: `connectionDenied`, `connectionCancelled`, `TIMEOUT`, `POPUP_ERROR`

Example:

```ts
const res = await provider.request({ method: 'connect' });
if (res.success) {
  console.log('Connected address:', res.data.address);
}
```

## Transactions

These let your dApp construct transactions (or messages) and have the wallet sign and/or broadcast them.

#### sign

* **Params**: `[ message: string ]`
* **Behavior**: opens a sign popup for a plain message.
* **Success data**: `{ signature: string }` (wrapped by the wallet; underlying object includes `{ success: true, signature }`)
* **Errors**: `signError`, `signCancelled`, `TIMEOUT`

Example:

```ts
const res = await provider.request({ method: 'sign', params: ['hello world'] });
```

#### signTransaction

* **Params**: `[ unsignedTransaction: Transaction ]`
* **Behavior**: opens a sign-transaction popup and returns the signed transaction.
* **Success data**: `{ signedTransaction }` (wrapped; underlying object includes `{ success: true, signedTransaction }`)
* **Errors**: `signTransactionError`, `signTransactionCancelled`, `TIMEOUT`

Example:

```ts
const unsignedTx = {/* Transaction from SDK */};
const res = await provider.request({ method: 'signTransaction', params: [unsignedTx] });
```

#### sendTransaction

* **Params**: `[ transaction: Transaction ]`
* **Behavior**: signs the transaction, validates it, opens validation popup; on confirmation, broadcasts.
* **Success data**: `{ result, validityData }`
* **Errors**: `sendTransactionError`, `sendTransactionCancelled`, `TIMEOUT`, `POPUP_ERROR`

Example:

```ts
const tx = {/* Transaction from SDK */};
const res = await provider.request({ method: 'sendTransaction', params: [tx] });
```

#### sendSignedTransaction

* **Params**: `[ signedTransaction: Transaction ]`
* **Behavior**: validates the signed transaction, opens validation popup; on confirmation, broadcasts.
* **Success data**: `{ result, validityData }`
* **Errors**: `sendSignedTransactionError`, `sendSignedTransactionCancelled`, `TIMEOUT`, `POPUP_ERROR`

Example:

```ts
const signedTx = {/* signed Transaction from SDK */};
const res = await provider.request({ method: 'sendSignedTransaction', params: [signedTx] });
```

## Transaction helpers

These will construct, validate and broadcast transactions directly inside the wallet by passing the required parameters.

#### nativeTransfer

* **Params**: `[ { recipientAddress: string, amount: number } ]`
* **Behavior**: creates a transfer, validates it, then opens validation popup for user confirmation and broadcast.
* **Success data**: `{ result, validityData }`
* **Errors**: `nativeTransferError`, `nativeTransferCancelled`, `TIMEOUT`, `POPUP_ERROR`

Example:

```ts
const res = await provider.request({
  method: 'nativeTransfer',
  params: [{ recipientAddress: '0xabc...', amount: 1 }],
});
```

#### xmTransaction

* **Params**: `[ payload: XMScript ]`
* **Behavior**: creates an XM (cross-chain) transaction payload, validates it, and opens validation popup for user confirmation and broadcast.
* **Success data**: `{ result, validityData }`
* **Errors**: `xmTransactionError`, `validationCancelled`, `TIMEOUT`, `POPUP_ERROR`

Example:

```ts
const payload = {/* XMScript from SDK */};
const res = await provider.request({ method: 'xmTransaction', params: [payload] });
```

## Identity

### Cross-Chain (XM) Identities

#### getXmIdentities

* **Params**: none
* **Success data**: list of XM identities from SDK
* **Errors**: `getXmIdentitiesError`

Example:

```ts
const res = await provider.request({ method: 'getXmIdentities' });
```

#### addXmIdentity

* **Params**: `[payload: InferFromSignaturePayload]`
* **Behavior**: infers and validates identity, then prompts user in validation popup; upon confirmation broadcasts.
* **Success data**: `{ result, validityData }`
* **Errors**: `addXmIdentityError`, `addXmIdentityCancelled`, `TIMEOUT`

Example:

```ts
const payload = /* build InferFromSignaturePayload */
const res = await provider.request({ method: 'addXmIdentity', params: [payload] });
```

#### removeXmIdentity

* **Params**: `[payload: XMCoreTargetIdentityPayload]`
* **Behavior**: creates removal validity data and prompts user in validation popup; upon confirmation broadcasts.
* **Success data**: `{ result, validityData }`
* **Errors**: `removeXmIdentityError`, `removeXmIdentityCancelled`, `TIMEOUT`

Example:

```ts
const payload = { /* XMCoreTargetIdentityPayload */ };
const res = await provider.request({ method: 'removeXmIdentity', params: [payload] });
```

### Web2 Identities

#### getWeb2Identities

* **Params**: none
* **Success data**: identities list from SDK
* **Errors**: `getWeb2IdentitiesError`

Example:

```ts
const res = await provider.request({ method: 'getWeb2Identities' });
```

#### getWeb2IdentityProofPayload

* **Params**: none
* **Success data**: proof payload to be used for Web2 identity linking
* **Errors**: `getWeb2IdentityProofPayloadError`

Example:

```ts
const res = await provider.request({ method: 'getWeb2IdentityProofPayload' });
```

#### addTwitterIdentity

* **Params**: `[payload: TwitterProof, referralCode?: string]`
* **Behavior**: validates and prompts user in validation popup; upon confirmation broadcasts. Optional referral code can be provided as second parameter.
* **Success data**: `{ result, validityData }`
* **Errors**: `addTwitterIdentityError`, `addTwitterIdentityCancelled`, `TIMEOUT`

Example:

```ts
const proof = /* TwitterProof from your backend/SDK */
const res = await provider.request({ method: 'addTwitterIdentity', params: [proof] });

// With referral code
const res = await provider.request({ method: 'addTwitterIdentity', params: [proof, 'REFERRAL123'] });
```

#### addDiscordIdentity

* **Params**: `[payload: DiscordProof]`
* **Behavior**: validates Discord identity proof and prompts user in validation popup; upon confirmation broadcasts.
* **Success data**: `{ result, validityData }`
* **Errors**: `addDiscordIdentityError`, `addDiscordIdentityCancelled`, `TIMEOUT`

Example:

```ts
const proof = /* DiscordProof from your backend/SDK */
const res = await provider.request({ method: 'addDiscordIdentity', params: [proof] });
```

#### addGithubIdentity

* **Params**: `[payload: GithubProof]`
* **Behavior**: validates Github identity proof and prompts user in validation popup; upon confirmation broadcasts.
* **Success data**: `{ result, validityData }`
* **Errors**: `addGithubIdentityError`, `addGithubIdentityCancelled`, `TIMEOUT`

Example:

```ts
const proof = /* GithubProof from your backend/SDK */
const res = await provider.request({ method: 'addGithubIdentity', params: [proof] });
```

#### removeWeb2Identity

* **Params**: `[ { context: string, username: string } ]`
* **Behavior**: constructs validity data and prompts user in validation popup; upon confirmation broadcasts.
* **Success data**: `{ result, validityData }`
* **Errors**: `removeWeb2IdentityError`, `removeWeb2IdentityCancelled`, `TIMEOUT`

Example:

```ts
const res = await provider.request({
  method: 'removeWeb2Identity',
  params: [{ context: 'twitter', username: 'handle' }],
});
```

### Unstoppable Domains

#### getUDChallenge

* **Params**: `[ demosPublicKey: string, signingAddress: string ]`
* **Behavior**: generates a challenge string for Unstoppable Domains identity verification.
* **Success data**: challenge string
* **Errors**: `getUDChallengeError`

Example:

```ts
const res = await provider.request({
  method: 'getUDChallenge',
  params: ['demosPublicKey123', '0xabc...'],
});
```

#### getUDResolution

* **Params**: `[ domain: string ]`
* **Behavior**: resolves an Unstoppable Domain to get its resolution data.
* **Success data**: `UnifiedDomainResolution` object
* **Errors**: `getUDResolutionError`

Example:

```ts
const res = await provider.request({
  method: 'getUDResolution',
  params: ['mydomain.crypto'],
});
```

#### addUDIdentity

* **Params**: `[ signingAddress: string, signature: string, challenge: string, resolutionData: UnifiedDomainResolution, referralCode?: string ]`
* **Behavior**: validates Unstoppable Domain identity with the provided signature and challenge, prompts user in validation popup; upon confirmation broadcasts. Optional referral code can be provided.
* **Success data**: `{ result, validityData }`
* **Errors**: `addUDIdentityError`, `addUDIdentityCancelled`, `TIMEOUT`

<Note>
The `signingAddress` should be an EVM address (e.g., `0x...`) or Solana address based on the chosen chain. Similarly, the `signature` should be an EVM signature or Solana signature corresponding to the chain used for signing.
</Note>

Example:

```ts
// First get the challenge
const challengeRes = await provider.request({
  method: 'getUDChallenge',
  params: [demosPublicKey, signingAddress],
});

// Get resolution data
const resolutionRes = await provider.request({
  method: 'getUDResolution',
  params: ['mydomain.crypto'],
});

// Sign the challenge with user's wallet (EVM or Solana), then add identity
const res = await provider.request({
  method: 'addUDIdentity',
  params: [signingAddress, signature, challengeRes.data, resolutionRes.data],
});

// With referral code
const res = await provider.request({
  method: 'addUDIdentity',
  params: [signingAddress, signature, challengeRes.data, resolutionRes.data, 'REFERRAL123'],
});
```

### Nomis Score

#### getNomisScore

* **Params**: `[ walletAddress: string, chain: string ]`
* **Behavior**: fetches the Nomis score for the specified wallet address on the given chain.
* **Success data**: Nomis score response object
* **Errors**: `getNomisScoreError`

Example:

```ts
const res = await provider.request({
  method: 'getNomisScore',
  params: ['0xabc...', 'evm'], // chain: 'evm' or 'solana'
});
```

#### addNomisIdentity

* **Params**: `[ payload: NomisWalletIdentity ]`
* **Behavior**: validates Nomis identity and prompts user in validation popup; upon confirmation broadcasts.
* **Success data**: `{ result, validityData }`
* **Errors**: `addNomisIdentityError`, `addNomisIdentityCancelled`, `TIMEOUT`

Example:

```ts
const payload = {/* NomisWalletIdentity from SDK */};
const res = await provider.request({ method: 'addNomisIdentity', params: [payload] });
```

#### removeNomisIdentity

* **Params**: `[ payload: NomisWalletIdentity ]`
* **Behavior**: creates removal validity data and prompts user in validation popup; upon confirmation broadcasts.
* **Success data**: `{ result, validityData }`
* **Errors**: `removeNomisIdentityError`, `removeNomisIdentityCancelled`, `TIMEOUT`

Example:

```ts
const payload = {/* NomisWalletIdentity to remove */};
const res = await provider.request({ method: 'removeNomisIdentity', params: [payload] });
```

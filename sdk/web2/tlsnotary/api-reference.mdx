---
title: "TLSNotary API Reference"
description: "API reference for TLSNotary cryptographic attestation in the Demos SDK"
icon: "code"
---

# TLSNotary API Reference

### Methods

#### requestTlsn()

Initiates a TLSNotary attestation request. This method handles the complete flow: submitting the request transaction, connecting to the proxy, notarizing the response, and storing the proof.

```typescript
interface ITlsnRequestParams {
    url: string                       // Target URL to notarize
    method?: "GET" | "POST"           // HTTP method (default: GET)
    headers?: Record<string, string>  // Custom headers
    body?: string                     // Request body for POST
    redactions?: string[]             // JSON paths to redact in proof
}

const result = await demos.web2.requestTlsn(params: ITlsnRequestParams)
```

#### Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `url` | string | Yes | The target URL to notarize |
| `method` | "GET" \| "POST" | No | HTTP method (default: "GET") |
| `headers` | Record<string, string> | No | Custom headers to include |
| `body` | string | No | Request body for POST requests |
| `redactions` | string[] | No | JSON paths to redact from proof |

#### Returns

```typescript
interface ITlsnResult {
    response: {
        status: number                // HTTP status code
        headers: Record<string, string>  // Response headers
        body: string                  // Response body
    }
    proof: {
        id: string                    // Proof identifier
        hash: string                  // Proof hash stored on-chain
        size: number                  // Proof size in bytes
    }
    txHash: string                    // Final transaction hash
    requestTxHash: string             // Initial request transaction
    storageTxHash: string             // Proof storage transaction
}
```

### Native Transaction Types

TLSNotary uses two native transaction types:

#### tlsn_request

Requests a TLSNotary attestation. Creates an access token for the proxy.

```typescript
// SDK handles this internally
const tx = await demos.createTransaction({
    type: "native",
    data: ["native", {
        nativeOperation: "tlsn_request",
        args: [targetUrl]
    }]
})
```

**Cost**: 1 DEM (burned as fee)

#### tlsn_store

Stores the proof on-chain after notarization completes.

```typescript
// SDK handles this internally
const tx = await demos.createTransaction({
    type: "native",
    data: ["native", {
        nativeOperation: "tlsn_store",
        args: [proofId, proofData]
    }]
})
```

**Cost**: 1 DEM base + 1 DEM per KB (burned as storage fee)

### Cost Structure

| Operation | Base Cost | Variable Cost | Notes |
|-----------|-----------|---------------|-------|
| `tlsn_request` | 1 DEM | - | Initial request fee |
| `tlsn_store` | 1 DEM | +1 DEM/KB | Storage fee based on proof size |
| Gas | Standard | - | Network transaction gas |

**Example costs:**
- Small proof (1KB): 1 + 1 + 1 = 3 DEM + gas
- Medium proof (5KB): 1 + 1 + 5 = 7 DEM + gas
- Large proof (20KB): 1 + 1 + 20 = 22 DEM + gas

### Error Codes

| Code | Description | Resolution |
|------|-------------|------------|
| `TLSN_INVALID_URL` | URL is not accessible or malformed | Verify URL format and accessibility |
| `TLSN_TIMEOUT` | Notarization timed out | Retry or check target server |
| `TLSN_INSUFFICIENT_BALANCE` | Not enough DEM for fees | Top up DEM balance |
| `TLSN_PROOF_TOO_LARGE` | Proof exceeds maximum size | Reduce response size or use redactions |
| `TLSN_TOKEN_EXPIRED` | Access token expired | Request will auto-retry |
| `TLSN_PROXY_UNAVAILABLE` | No proxy available for domain | Wait and retry |

### Advanced Usage

#### Custom Headers

```typescript
const result = await demos.web2.requestTlsn({
    url: "https://api.example.com/data",
    headers: {
        "Authorization": "Bearer your-token",
        "X-Custom-Header": "value"
    }
})
```

#### POST Requests

```typescript
const result = await demos.web2.requestTlsn({
    url: "https://api.example.com/submit",
    method: "POST",
    headers: {
        "Content-Type": "application/json"
    },
    body: JSON.stringify({ key: "value" })
})
```

#### Selective Redaction

Redact sensitive fields from the proof while still proving the response structure:

```typescript
const result = await demos.web2.requestTlsn({
    url: "https://api.bank.com/account",
    redactions: [
        "$.accountNumber",      // Redact account number
        "$.transactions[*].id", // Redact all transaction IDs
        "$.ssn"                 // Redact SSN
    ]
})
```

### Verification

Proofs can be verified by any party with the proof data:

```typescript
// Retrieve proof from chain
const proofData = await demos.getProof(proofHash)

// Verify proof integrity
const isValid = await demos.web2.verifyTlsnProof(proofData)

// Extract attested data
const attestedData = await demos.web2.extractTlsnData(proofData)
```
